<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>REALIA Browser Open World / Complete Demo (A)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">R</div>
      <div class="brandText">
        <div class="brandName">REALIA</div>
        <div class="brandSub">Browser Open World / Complete Demo</div>
      </div>
    </div>

    <div class="statusPills">
      <div class="pill" id="pillArea">Area: <span id="areaName">World (Select)</span></div>
      <div class="pill subtle" id="hintText">ゲートに近づくと入れます（ネオン/霧）</div>
    </div>
  </header>

  <main class="layout">
    <section class="card worldCard">
      <div class="cardHead">
        <h1>オープンワールド</h1>
        <p>街を歩き、ゲートを探してエリアへ入ります。スマホは左下スティックで移動。</p>
      </div>

      <div class="worldWrap">
        <canvas id="world" width="960" height="540" aria-label="open world canvas"></canvas>

        <div class="hud">
          <div class="hudRow">
            <button class="btn ghost" id="btnEntrance">入口</button>
            <button class="btn ghost" id="btnWorld">ワールド</button>
            <button class="btn ghost" id="btnReset">リセット</button>
          </div>
          <div class="hudRow">
            <button class="btn" id="btnTalk" disabled>話す（近くで有効）</button>
            <button class="btn primary" id="btnEnterArea" disabled>このエリアに入る</button>
          </div>
          <div class="hudRow tiny" id="controlsText">操作：WASD/矢印 / 画面左下スティック（スマホ） / タップで話す</div>
        </div>

        <div class="joystick" id="joy">
          <div class="joyBase"></div>
          <div class="joyKnob" id="joyKnob"></div>
          <div class="joyLabel">MOVE</div>
        </div>

        <div class="minimap">
          <canvas id="minimap" width="160" height="120"></canvas>
          <div class="miniLegend">
            <span class="dot player"></span>あなた
            <span class="dot gate"></span>ゲート
            <span class="dot npc"></span>AI
          </div>
        </div>

        <div class="toast" id="toast" aria-live="polite"></div>
      </div>
    </section>

    <section class="card chatCard">
      <div class="cardHead">
        <h2>AI接客（簡易）</h2>
        <p class="muted">※いまはダミー応答。後で本物のAIに差し替えます。</p>
      </div>

      <div class="chatLog" id="chatLog" role="log" aria-label="chat log"></div>

      <div class="chatBar">
        <input id="chatInput" type="text" placeholder="例：予算100万円で外壁塗装できる？" autocomplete="off" />
        <button id="chatSend" class="btn primary">送信</button>
      </div>

      <div class="chatMeta">
        <div>NPC：<span id="npcName">未選択（近づいて話す）</span></div>
        <div class="right">距離：<span id="distanceText">--</span></div>
      </div>
    </section>
  </main>

  <div class="modal hidden" id="areaModal" role="dialog" aria-modal="true" aria-label="area">
    <div class="modalBack" id="modalBack"></div>
    <div class="modalCard">
      <div class="modalTop">
        <div>
          <div class="modalTitle" id="modalTitle">Area</div>
          <div class="modalSub" id="modalSub">説明</div>
        </div>
        <button class="btn ghost" id="modalClose">閉じる</button>
      </div>

      <div class="modalBody">
        <div class="sceneGrid">
          <div class="sceneThumb" id="sceneThumb">
            <div class="sceneOverlay">
              <div class="sceneName" id="sceneName">Scene</div>
              <div class="sceneTip">ここは「デモ背景」です。雰囲気を強化しています。</div>
            </div>
          </div>

          <div class="sceneInfo">
            <div class="kv"><div class="k">テーマ</div><div class="v" id="sceneTheme">—</div></div>
            <div class="kv"><div class="k">アバター</div><div class="v" id="sceneNpc">—</div></div>
            <div class="kv"><div class="k">できること</div><div class="v" id="sceneTodo">—</div></div>

            <div class="modalActions">
              <button class="btn primary" id="modalEnter">このエリアに入る</button>
              <button class="btn" id="modalTalk">AIに話す</button>
            </div>

            <div class="note">Tip：ワールド上では、ゲートの「青い円」に近づくと入場ボタンが有効になります。</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="foot">© REALIA Demo</footer>

  <script src="app.js"></script>
</body>
</html>
